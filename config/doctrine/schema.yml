LabEquipment:
  columns:
    name:      { type: string(255), notnull: true, unique: true }
    slug:      { type: string(255), notnull: true, unique: true }
    wiki_page: { type: string(255) }

LabAppointment:
  actAs: { Timestampable: ~ }
  columns:
    user_id:          { type: integer, notnull: true }
    equipment_id:     { type: integer, notnull: true }
    appointment_date: { type: date, notnull: true }
    schedule_id:      { type: integer, notnull: true }
    appointment_type: { type: enum, values: [ basic, advanced ] }
    event_status:     { type: enum, values: [ approved, pending, billed] }
    is_synched:       { type: boolean, default: 0 }
  relations:
    LabEquipment:             { local: equipment_id, foreign: id, foreignAlias: LabAppointments }
    sfGuardUser:              { local: user_id, foreign: id, foreignAlias: LabAppointments }
    LabEquipmentSchedule:     { local: schedule_id, foreign: id }

LabAppointmentInfo:
  actAs: { Timestampable: ~ }
  columns:
    appointment_id: { type: integer, notnull: true }
    info_key: { type: string(255), notnull: true }
    info_value: { type: string(5000), notnull: true }
  relations:
    LabAppointment: { onDelete: CASCADE, local: appointment_id, foreign: id }
    
LabEquipmentSchedule:
  columns:
    equipment_id:    { type: integer, notnull: true }
    start_time:      { type: time, notnull: true }
    end_time:        { type: time, notnull: true }
  relations:
    LabEquipment: { onDelete: CASCADE, local: equipment_id, foreign: id }